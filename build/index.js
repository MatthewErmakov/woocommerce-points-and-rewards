(window.webpackJsonp_woocommerce_points_and_rewards=window.webpackJsonp_woocommerce_points_and_rewards||[]).push([[1],{10:function(e,t,n){},9:function(e,t,n){}}]),function(e){function t(t){for(var r,s,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(p&&p(t);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={0:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonp_woocommerce_points_and_rewards=window.webpackJsonp_woocommerce_points_and_rewards||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var p=c;a.push([11,1]),n()}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wc.blocksCheckout},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wc.wcSettings},function(e,t){e.exports=window.wp.plugins},function(e,t){e.exports=window.wp.htmlEntities},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.React},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var s=o.apply(null,r);s&&e.push(s)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var i in r)n.call(r,i)&&r[i]&&e.push(i);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(4),a=n(1),s=n(3),i=e=>{let{extensions:t}=e;const{"points-and-rewards":n}=t;return(null==n?void 0:n.earn_points_message)&&Object(r.createElement)("div",null,Object(r.createElement)(r.RawHTML,{className:"wc-points-rewards-earn-points-message"},null==n?void 0:n.earn_points_message))},c=n(2),l=n(5),p=n(6),u=n.n(p),d=n(7),m=n(8),b=n.n(m);n(9);var w=Object(d.forwardRef)((e,t)=>{let{className:n,id:o,type:s="text",ariaLabel:i,ariaDescribedBy:c,label:l,screenReaderLabel:p,disabled:d,help:m,autoCapitalize:w="off",autoComplete:f="off",value:_="",onChange:O,min:j,max:g,step:v,required:h=!1,onBlur:y=(()=>{})}=e;const[x,E]=Object(r.useState)(!1),S="number"===s?{step:v,min:j,max:g}:{},P={};return Object.keys(S).forEach(e=>{void 0!==S[e]&&(P[e]=S[e])}),Object(r.createElement)("div",{className:b()("wc-points-rewards-text-input",n,{"is-active":x||_})},Object(r.createElement)("input",u()({type:s,id:o,value:_,ref:t,autoCapitalize:w,autoComplete:f,onChange:e=>{O(e.target.value)},onFocus:()=>E(!0),onBlur:e=>{y(e.target.value),E(!1)},"aria-label":i||l,disabled:d,"aria-describedby":m&&!c?o+"__help":c,required:h},P)),Object(r.createElement)(a.Label,{label:l,screenReaderLabel:p||l,wrapperElement:"label",wrapperProps:{htmlFor:o},htmlFor:o}))}),f=()=>{let e=parseInt(Object(s.getSetting)("points-and-rewards_data").points_available,10),t=parseInt(Object(s.getSetting)("points-and-rewards_data").minimum_points_amount,10);return isNaN(t)&&(t=0),isNaN(e)&&(e=0),{pointsAvailable:e,minimumPointsAmount:t,isPartialRedemptionEnabled:Object(s.getSetting)("points-and-rewards_data").partial_redemption_enabled}},_=e=>{var t,n;let{cart:o,extensions:s,discountRegex:i}=e;const p="woocommerce-points-and-rewards-redemption-input",{isPartialRedemptionEnabled:u,pointsAvailable:d,minimumPointsAmount:m}=f(),b=0===m?"":m,[_,O]=Object(r.useState)(b),[j,g]=Object(r.useState)(!1),v=null===(t=s["points-and-rewards"])||void 0===t?void 0:t.redeem_points_message,h=null===(n=s["points-and-rewards"])||void 0===n?void 0:n.cart_max_points,y=Object(r.useMemo)(()=>{const{cartCoupons:e}=o;return e.length>0&&e.some(e=>e.code.match(i))},[o,i]),[x,E]=Object(r.useState)(!1),[S,P]=Object(r.useState)("");return v&&d>0&&h>=m&&!y&&Object(r.createElement)(a.Panel,{className:"wc-points-rewards-totals-redemption",hasBorder:!1,initialOpen:!0,title:Object(l.decodeEntities)(v)},u&&Object(r.createElement)(a.Label,{label:Object(c.__)("Enter the number you'd like to redeem","woocommerce-points-and-rewards"),screenReaderLabel:Object(c.__)("Enter the number you'd like to redeem","woocommerce-points-and-rewards"),htmlFor:p}),Object(r.createElement)("div",{className:""},Object(r.createElement)("form",{className:"wc-points-rewards-redeem-form"},u&&Object(r.createElement)(w,{id:p,label:Object(c.__)("Enter amount","woocommerce-points-and-rewards"),type:"number",value:_,ariaDescribedBy:"",onChange:e=>{O(e)},validateOnMount:!1,focusOnMount:!1,showError:x,errorMessage:S,min:m,max:parseInt(d,10)}),Object(r.createElement)(a.Button,{className:"wc-points-rewards-redeem-button"+(u?"":" no-margin"),disabled:u&&(null===_||""===_)||j||!u&&y,showSpinner:j,onClick:e=>{var t;e.preventDefault(),t=_,g(!0),E(!1),P(""),Object(a.extensionCartUpdate)({namespace:"points-and-rewards",data:u?{discount_amount:t}:{}}).then(()=>{O("")}).catch(e=>{E(!0),null!=e&&e.message&&"string"==typeof e.message?P(e.message):P(Object(c.__)("An unknown error occurred.","woocommerce-points-and-rewards"))}).finally(()=>{g(!1)})},type:"submit"},Object(c.__)("Apply Discount","woocommerce-points-and-rewards")),x&&Object(r.createElement)("div",{className:"woocommerce-points-rewards-validation-error"},S))))};n(10);const O=/wc_points_redemption(?:_\d+)+/,j=Object(s.getSetting)("points-and-rewards_data").points_label_singular,g=Object(s.getSetting)("points-and-rewards_data").points_label_plural;var v,h;Object(o.registerPlugin)("woocommerce-points-and-rewards",{render:()=>{const{minimumPointsAmount:e,pointsAvailable:t}=f();return Object(r.createElement)(r.Fragment,null,t>0&&t>=e&&Object(r.createElement)(a.ExperimentalDiscountsMeta,null,Object(r.createElement)(_,{pointsLabelSingular:j,pointsLabelPlural:g,discountRegex:O})),Object(r.createElement)(a.ExperimentalOrderMeta,null,Object(r.createElement)(i,null)))},scope:"woocommerce-checkout"}),v=g,h=O,Object(a.__experimentalRegisterCheckoutFilters)("woocommerce-points-and-rewards",{coupons:e=>e.map(e=>e.label.match(h)?{...e,label:Object(c.sprintf)(
/* translators: %s is the custom label for points, e.g. coins, tokens etc. */
Object(c.__)("%s redemption","woocommerce-points-and-rewards"),v)}:e),snackbarNoticeVisibility:e=>{const t=Object.assign({},e);return Object.keys(e).forEach(e=>{t[e]=!e.match(h)}),t}})}]);